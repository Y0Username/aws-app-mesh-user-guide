<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "file://zonbook/docbookx.dtd"
[
    <!ENTITY % xinclude SYSTEM "file://AWSShared/common/xinclude.mod">
    %xinclude;
    <!ENTITY % phrases-shared SYSTEM "file://AWSShared/common/phrases-shared.ent">
    %phrases-shared;
    <!ENTITY % phrases-appmesh SYSTEM "../shared/phrases-app-mesh.ent"> 
    %phrases-appmesh;
]>
<section role="topic" id="meshes">
    <info>
        <title id="meshes.title">Service Meshes</title>
        <titleabbrev>Mesh</titleabbrev>
    </info>
    <para>A service mesh is a logical boundary for network traffic between the services that reside
        within it. After you create your service mesh, you can create virtual services, virtual
        nodes, virtual routers, and routes to distribute traffic between the applications in your
        mesh.</para>
    <section id="create-mesh">
        <info>
            <title id="create-mesh.title">Creating a service mesh</title>
        </info>
        <note>
            <para>When creating a Mesh, you must add a namespace selector. If the namespace selector
                is empty, it selects all namespaces. To restrict the namespaces, use a label to
                associate AppMesh resources to the created mesh.</para>
        </note>
        <para>To create a service mesh using the &CLI; version &aws_cli_min_version; or higher, see
            the example in the &CLI; reference for the <ulink type="documentation"
                url="cli/latest/reference/appmesh/create-mesh.html">create-mesh</ulink>
            command.</para>
        <procedure>
            <title>To create a service mesh using the &console;</title>
            <step>
                <para>&MESHConsoleSwitch;</para>
            </step>
            <step>
                <para>Choose <guilabel>Create mesh</guilabel>.</para>
            </step>
            <step>
                <para>For <guilabel>Mesh name</guilabel>, specify a name for your service
                    mesh.</para>
            </step>
            <step>
                <para>(Optional) Choose <guilabel>Allow external traffic</guilabel>. By default,
                    proxies in the mesh will only forward traffic between each other. If you allow
                    external traffic, the proxies in the mesh will also forward TCP traffic directly
                    to services that aren't deployed with a proxy that is defined in the
                    mesh.</para>
            </step>
            <step>
                <para>Choose <guilabel>Create mesh</guilabel> to finish.</para>
            </step>
            <step>
                <para>(Optional) Share the mesh with other accounts. A shared mesh allows resources
                    created by different accounts to communicate with each other in the same mesh.
                    For more information, see <link linkend="sharing" endterm="sharing.title"
                    />.</para>
            </step>
        </procedure>
    </section>
</section>
