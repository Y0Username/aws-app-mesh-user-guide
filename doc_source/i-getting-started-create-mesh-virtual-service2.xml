<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "file://zonbook/docbookx.dtd"
[
  <!ENTITY % xinclude SYSTEM "file://AWSShared/common/xinclude.mod">
  %xinclude;
  <!ENTITY % phrases-shared SYSTEM "file://AWSShared/common/phrases-shared.ent">
  %phrases-shared;
<!ENTITY % phrases-appmesh SYSTEM "../shared/phrases-app-mesh.ent"> 
    %phrases-appmesh;
]>

<section id="create-mesh-and-virtual-service2">
    <info>
        <title id="create-mesh-and-virtual-service2.title">Step 1: Create a mesh and virtual
            service</title>
    </info>
    <para>A service mesh is a logical boundary for network traffic between the services that reside
        within it. For more information, see <xref linkend="meshes" endterm="meshes.title"/>. A
        virtual service is an abstraction of an actual service. For more information, see <xref
            linkend="virtual_services" endterm="virtual_services.title"/>.
        </para>
    <para>Create the following resources:</para>
    <itemizedlist>
        <listitem>
            <para>A mesh named <code>apps</code>, since all of the services in the scenario are
                registered to the <code>apps.local</code> namespace.</para>
        </listitem>
        <listitem>
            <para>A virtual service named <code>serviceb.apps.local</code>, since the virtual
                service represents a service that is discoverable with that name, and you
                don&apos;t want to change your code to reference another name. A virtual service
                named <code>servicea.apps.local</code> is added in a later step.</para>
        </listitem>
    </itemizedlist>
    <para>You can use the &console; or the &CLI; version &aws_cli_min_version; or higher or
        &aws_cli_min_version_2; or higher to complete the following steps. If using the &CLI;,
        use the <code>aws --version</code> command to check your installed &CLI; version. If you
        don&apos;t have version &aws_cli_min_version; or higher or &aws_cli_min_version_2; or
        higher installed, then you must <ulink type="documentation"
            url="cli/latest/reference/appmesh/cli-chap-install.html">install
            or update the &CLI;</ulink>. Select the tab for the tool that you want to
        use.</para>
    
    <tablist>
        <tablistentry>
            <tabname>&console;</tabname>
            <tabcontent>
                <procedure>
                    <step>
                        <para>Open the &MESH; console first-run wizard at <ulink type="console"
                            url="appmesh/get-started"
                            >https://console.aws.amazon.com/appmesh/get-started</ulink>.</para>
                    </step>
                    <step>
                        <para>For <guilabel>Mesh name</guilabel>, enter
                            <userinput>apps</userinput>.</para>
                    </step>
                    <step>
                        <para>For <guilabel>Virtual service name</guilabel>, enter
                            <userinput>serviceb.apps.local</userinput>.</para>
                    </step>
                    <step>
                        <para>To continue, choose <guilabel>Next</guilabel>.</para>
                    </step>
                </procedure>
            </tabcontent>
        </tablistentry>
        <tablistentry>
            <tabname>&CLI;</tabname>
            <tabcontent>
                <procedure>
                    <step>
                        <para>Create a mesh with the <code><ulink
                            type="documentation"
                            url="cli/latest/reference/appmesh/create-mesh.html"
                            >create-mesh</ulink></code> command.</para>
                        <programlisting><userinput>aws appmesh create-mesh --mesh-name apps</userinput></programlisting>
                    </step>
                    <step>
                        <para>Create a virtual service with the <code><ulink
                            type="documentation"
                            url="cli/latest/reference/appmesh/create-virtual-service.html"
                            >create-virtual-service</ulink></code> command.</para>
                        <programlisting><userinput>aws appmesh create-virtual-service --mesh-name apps --virtual-service-name serviceb.apps.local --spec {}</userinput></programlisting>
                    </step>
                </procedure>
            </tabcontent>
        </tablistentry>
    </tablist>
</section>